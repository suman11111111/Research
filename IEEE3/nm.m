B=[-0.25 0.1 0.15;0.1 -0.2 0.1;0.15 0.1 -0.25];
B1=B(1,:);
B2=B(2,:);
B3=B(3,:);
theta=[-0.8525;-1.4477; -0.9713];
delt=[0;-0.6999];
V=[1.1775;1.0907;2.6185];
Vg=[1.1775;1.0907];
Vd=V(1)*V(2)*V(3);
Id=[-0.6138;-0.3427];
Iq=[-0.7703;-0.6696];
Vs1=[0;V(2)*sin(theta(1)-theta(2));V(3)*sin(theta(1)-theta(3))];
Vs2=[V(1)*sin(theta(2)-theta(1));0;V(3)*sin(theta(2)-theta(3))];
Vs3=[V(1)*sin(theta(3)-theta(1));V(2)*sin(theta(3)-theta(2));0];
Vc1=[0;V(2)*cos(theta(1)-theta(2));V(3)*cos(theta(1)-theta(3))];
Vc2=[V(1)*cos(theta(2)-theta(1));0;V(3)*cos(theta(2)-theta(3))];
Vc3=[V(1)*cos(theta(3)-theta(1));V(2)*cos(theta(3)-theta(2));0];
S1=[0;sin(theta(1)-theta(2));sin(theta(1)-theta(3))];
S2=[sin(theta(2)-theta(1));0;sin(theta(2)-theta(3))];
S3=[sin(theta(3)-theta(1));sin(theta(3)-theta(2));0];
C1=[0;cos(theta(1)-theta(2));cos(theta(1)-theta(3))];
C2=[cos(theta(2)-theta(1));0;cos(theta(2)-theta(3))];
C3=[cos(theta(3)-theta(1));cos(theta(3)-theta(2));0];
Sdt=[sin(delt(1)-theta(1));sin(delt(2)-theta(2))];
Cdt=[cos(delt(1)-theta(1));cos(delt(2)-theta(2))];
M=[Id.*Sdt+Iq.*Cdt,-Id.*Vg.*Cdt+Iq.*Vg.*Sdt,zeros(2,1),zeros(2,1);Id.*Sdt-Iq.*Cdt,Id.*Vg.*Cdt+Iq.*Vg.*Sdt,zeros(2,1),zeros(2,1);0,0,0,0;0,0,0,0];
N=[-B1*Vs1,-Vd*B1*Vc1,-Vd*B1*S1,Vd*B1*Vc1;-B1*Vc1,Vd*B1*Vs1,-Vd*B1*C1,-Vd*B1*Vs1;-B2*Vs2,-Vd*B2*Vc2,-Vd*B2*S2,Vd*B2*Vc2;-B2*Vc2,Vd*B2*Vs2,-Vd*B2*C2,-Vd*B2*Vs2;-B3*Vs3,-Vd*B3*Vc3,-Vd*B3*S3,Vd*B3*Vc3;-B3*Vc3,Vd*B3*Vs3,-Vd*B3*C3,-Vd*B3*Vs3];
